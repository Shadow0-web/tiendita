<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sonya Store - Tienda de Ropa</title>
    <meta name="description" content="Pedidos contra entrega con envío en Guayaquil.">
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: Arial, sans-serif;
        background: #f9fafb;
        color: #111827;
        line-height: 1.5;
      }
      a { text-decoration: none; color: inherit; }
      button { cursor: pointer; font-family: inherit; }
      img { max-width: 100%; height: auto; }
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
      }
      header {
        background: #fff;
        border-bottom: 1px solid #e5e7eb;
        position: sticky;
        top: 0;
        z-index: 50;
      }
      .header-content {
        display: flex;
        align-items: center;
        justify-content: space-between;
        height: 3.5rem;
      }
      .search-container {
        flex: 1;
        max-width: 24rem;
        margin: 0 1rem;
        position: relative;
        display: none;
      }
      @media (min-width: 768px) {
        .search-container { display: block; }
      }
      .search-input {
        width: 100%;
        padding: 0.5rem 2.5rem 0.5rem 1rem;
        border: 1px solid #d1d5db;
        border-radius: 0.375rem;
        outline: none;
      }
      .search-input:focus {
        border-color: #00a680;
        box-shadow: 0 0 0 1px #00a680;
      }
      .search-button {
        position: absolute;
        right: 0;
        top: 0;
        bottom: 0;
        width: 2.5rem;
        background: #00a680;
        border: none;
        border-radius: 0 0.375rem 0.375rem 0;
        color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .mobile-search {
        padding: 0.5rem 0;
        display: block;
      }
      @media (min-width: 768px) {
        .mobile-search { display: none; }
      }
      .header-actions {
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }
      .cart-button {
        position: relative;
        padding: 0.5rem;
        background: #befcdf;
        border: none;
        border-radius: 0.375rem;
      }
      .cart-count {
        position: absolute;
        top: -0.25rem;
        right: -0.25rem;
        background: #d82c2cc7;
        color: #000000;
        font-size: 0.75rem;
        font-weight: 700;
        height: 1rem;
        width: 1rem;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
      }
      .store-info {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1rem;
        padding: 1rem 0;
      }
      @media (min-width: 768px) {
        .store-info {
          flex-direction: row;
          align-items: flex-start;
        }
      }
      .store-logo img {
        width: 6rem;
        height: 6rem;
        border-radius: 50%;
        object-fit: cover;
      }
      .store-details {
        flex: 1;
        text-align: center;
      }
      @media (min-width: 768px) {
        .store-details { text-align: left; }
      }
      .store-name {
        font-size: 1.25rem;
        font-weight: 700;
        margin-bottom: 0.25rem;
      }
      .store-meta {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        font-size: 0.875rem;
        color: #4b5563;
        margin-bottom: 0.25rem;
      }
      @media (min-width: 768px) {
        .store-meta { justify-content: flex-start; }
      }
      .categories-section {
        padding: 1rem 0;
      }
      .categories-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 0.75rem;
      }
      .categories-title {
        font-size: 1rem;
        font-weight: 600;
      }
      .categories-nav {
        display: flex;
        gap: 0.5rem;
      }
      .nav-button {
        padding: 0.25rem;
        border: none;
        background: none;
        border-radius: 50%;
      }
      .nav-button:hover {
        background: #f3f4f6;
      }
      .categories-list {
        display: flex;
        gap: 0.75rem;
        overflow-x: auto;
        padding-bottom: 0.5rem;
        scrollbar-width: none;
      }
      .categories-list::-webkit-scrollbar {
        display: none;
      }
      .category-item {
        flex-shrink: 0;
        padding: 0.5rem 0.75rem;
        border-radius: 0.375rem;
        white-space: nowrap;
      }
      .category-active {
        background: #00a680;
        color: #fff;
      }
      .category-inactive {
        background: #fff;
        border: 1px solid #d1d5db;
        color: #111827;
      }
      .load-more-button {
        flex-shrink: 0;
        display: flex;
        align-items: center;
        padding: 0.5rem 0.75rem;
        border: 1px solid #d1d5db;
        border-radius: 0.375rem;
        background: #fff;
        color: #4b5563;
      }
      .products-section {
        padding: 1rem 0;
      }
      .products-grid {
        display: grid;
        grid-template-columns: repeat(1, 1fr);
        gap: 0.75rem;
      }
      @media (min-width: 640px) {
        .products-grid { grid-template-columns: repeat(2, 1fr); }
      }
      @media (min-width: 768px) {
        .products-grid { grid-template-columns: repeat(3, 1fr); }
      }
      @media (min-width: 1024px) {
        .products-grid { grid-template-columns: repeat(4, 1fr); }
      }
      .product-card {
        background: #ffffff;
        border: 1px solid #525252;
        border-radius: 0.375rem;
        overflow: hidden;
        transition: box-shadow 0.2s;
      }
      .product-card:hover {
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .product-image {
        aspect-ratio: 1/1;
      }
      .product-image img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        padding: 0.75rem;
      }
      .product-info {
        padding: 0.75rem;
      }
      .product-name {
        font-size: 0.875rem;
        font-weight: 500;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        height: 2.5rem;
        margin-bottom: 0.25rem;
      }
      .product-footer {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .product-price {
        font-weight: 700;
        font-size: 1rem;
      }
      .add-to-cart {
        display: flex;
        align-items: center;
        font-size: 0.75rem;
        border: 1px solid #111827;
        border-radius: 0.375rem;
        padding: 0.25rem 0.5rem;
        background: none;
      }
      .add-to-cart.disabled {
        border-color: #d1d5db;
        color: #d1d5db;
        cursor: not-allowed;
      }
      .load-more-products {
        display: flex;
        justify-content: center;
        margin-top: 1rem;
      }
      .load-more-products button {
        display: flex;
        align-items: center;
        padding: 0.5rem 1rem;
        border: 1px solid #00a680;
        color: #00a680;
        border-radius: 0.375rem;
        background: none;
        width: 100%;
      }
      @media (min-width: 768px) {
        .load-more-products button { width: 50%; }
      }
      footer {
        border-top: 1px solid #e5e7eb;
        padding: 1rem 0;
      }
      .footer-content {
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      @media (min-width: 768px) {
        .footer-content {
          flex-direction: row;
          justify-content: space-between;
        }
      }
      .security-badge {
        display: flex;
        align-items: center;
        margin-bottom: 0.75rem;
      }
      @media (min-width: 768px) {
        .security-badge { margin-bottom: 0; }
      }
      .security-badge svg {
        color: #00a680;
        margin-right: 0.25rem;
      }
      .security-text {
        font-size: 0.875rem;
      }
      .created-with {
        display: flex;
        align-items: center;
      }
      .created-text {
        font-size: 0.875rem;
        margin-right: 0.25rem;
      }
      .creator-logo {
        display: flex;
        align-items: center;
      }
      .creator-logo-img img {
        width: 1.25rem;
        height: 1.25rem;
        margin-right: 0.25rem;
        border-radius: 50%;
        object-fit: cover;
      }
      .creator-name {
        font-size: 0.875rem;
        font-weight: 500;
      }
      .notification {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        padding: 8px 16px;
        border-radius: 4px;
        color: white;
        z-index: 1000;
        font-size: 0.875rem;
      }
      .notification.success { background-color: #00a680; }
      .notification.error { background-color: #d82c2cc7; }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="search-container">
                    <input type="text" class="search-input" id="search-input" placeholder="Buscar en Sonya Store">
                    <button class="search-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg>
                    </button>
                </div>
                <div class="header-actions">
                    <a href="cart.html" class="cart-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color:#00a680"><circle cx="8" cy="21" r="1"></circle><circle cx="19" cy="21" r="1"></circle><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"></path></svg>
                        <span class="cart-count">0</span>
                    </a>
                </div>
            </div>
            <div class="mobile-search">
                <div class="search-container" style="display:block">
                    <input type="text" class="search-input" id="mobile-search-input" placeholder="Buscar en Sonya Store">
                    <button class="search-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg>
                    </button>
                </div>
            </div>
        </div>
    </header>
    <div class="container">
        <div class="store-info">
            <div class="store-logo"><img src="logo.png" alt="Sonya Store"></div>
            <div class="store-details">
                <h1 class="store-name">Sonya Store</h1>
                <div class="store-meta">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="roundULE" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                    <p>Av. 6ta, Guayaquil, Ecuador</p>
                </div>
                <div class="store-meta">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>
                    <p>593 979899584</p>
                </div>
                <div class="store-meta">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
                    <p>Abierto ahora</p>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="categories-section">
            <div class="categories-header">
                <h2 class="categories-title">Categorías</h2>
                <div class="categories-nav">
                    <button class="nav-button" id="scroll-left"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"></path></svg></button>
                    <button class="nav-button" id="scroll-right"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"></path></svg></button>
                </div>
            </div>
            <div class="categories-list" id="categories-list">
                <a href="#" class="category-item category-active">Ver todos</a>
                <a href="#" class="category-item category-inactive">Ropa de caballeros</a>
                <a href="#" class="category-item category-inactive">Ropa de dama</a>
                <a href="#" class="category-item category-inactive">Ropa de niño y niña</a>
                <button class="load-more-button" id="load-more-categories">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"></path><path d="M12 5v14"></path></svg>
                    Cargar más
                </button>
            </div>
        </div>
    </div>
    <main class="container">
        <div class="products-section">
            <div class="products-grid" id="products-grid">
                <a href="#" class="product-card" data-category="Ropa de caballeros">
                    <div class="product-image"><img src="123.png" alt="Bermudas con cordón de caballeros talla 32,34,36,38"></div>
                    <div class="product-info">
                        <h2 class="product-name">Bermudas con cordón de caballeros talla 32,34,36,38</h2>
                        <div class="product-footer">
                            <p class="product-price">$13</p>
                            <button class="add-to-cart" data-name="Bermudas con cordón de caballeros talla 32,34,36,38" data-price="13" data-image="123.png" onclick="event.preventDefault()"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"></path><path d="M12 5v14"></path></svg>Agregar</button>
                        </div>
                    </div>
                </a>
                <a href="#" class="product-card" data-category="Ropa de caballeros">
                    <div class="product-image"><img src="bermudas2.png" alt="Bermudas de caballeros con estampado Talla S, M, L, XL"></div>
                    <div class="product-info">
                        <h2 class="product-name">Bermudas de caballeros con estampado Talla S, M, L, XL</h2>
                        <div class="product-footer">
                            <p class="product-price">$11</p>
                            <button class="add-to-cart" data-name="Bermudas de caballeros con estampado Talla S, M, L, XL" data-price="11" data-image="bermudas2.png" onclick="event.preventDefault()"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"></path><path d="M12 5v14"></path></svg>Agregar</button>
                        </div>
                    </div>
                </a>
                <a href="#" class="product-card" data-category="Ropa de niño y niña">
                    <div class="product-image"><img src="bermudas3.png" alt="Bermudas Jean de niño"></div>
                    <div class="product-info">
                        <h2 class="product-name">Bermudas Jean de niño</h2>
                        <div class="product-footer">
                            <p class="product-price">$10</p>
                            <button class="add-to-cart" data-name="Bermudas Jean de niño" data-price="10" data-image="bermudas3.png" onclick="event.preventDefault()"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"></path><path d="M12 5v14"></path></svg>Agregar</button>
                        </div>
                    </div>
                </a>
                <a href="#" class="product-card" data-category="Ropa de dama">
                    <div class="product-image"><img src="blusas.png" alt="Blusas forradas con mangas 3/4"></div>
                    <div class="product-info">
                        <h2 class="product-name">Blusas forradas con mangas 3/4</h2>
                        <div class="product-footer">
                            <p class="product-price">$8</p>
                            <button class="add-to-cart" data-name="Blusas forradas con mangas 3/4" data-price="8" data-image="blusas.png" onclick="event.preventDefault()"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"></path><path d="M12 5v14"></path></svg>Agregar</button>
                        </div>
                    </div>
                </a>
                <a href="#" class="product-card" data-category="Ropa de dama">
                    <div class="product-image"><img src="bragas.png" alt="Bragas importada de dama con 4 hileras de gafetes"></div>
                    <div class="product-info">
                        <h2 class="product-name">Bragas importada de dama con 4 hileras de gafetes</h2>
                        <div class="product-footer">
                            <p class="product-price">$10</p>
                            <button class="add-to-cart" data-name="Bragas importada de dama con 4 hileras de gafetes" data-price="10" data-image="bragas.png" onclick="event.preventDefault()"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"></path><path d="M12 5v14"></path></svg>Agregar</button>
                        </div>
                    </div>
                </a>
                <a href="#" class="product-card" data-category="Ropa de dama">
                    <div class="product-image"><img src="buzos1.png" alt="Buzos con capucha de dama"></div>
                    <div class="product-info">
                        <h2 class="product-name">Buzos con capucha de dama</h2>
                        <div class="product-footer">
                            <p class="product-price">$15</p>
                            <button class="add-to-cart" data-name="Buzos con capucha de dama" data-price="15" data-image="buzos1.png" onclick="event.preventDefault()"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"></path><path d="M12 5v14"></path></svg>Agregar</button>
                        </div>
                    </div>
                </a>
                <a href="#" class="product-card" data-category="Ropa de caballeros">
                    <div class="product-image"><img src="buzos2.png" alt="Buzos con capucha para caballero en talla S, M, L, XL"></div>
                    <div class="product-info">
                        <h2 class="product-name">Buzos con capucha para caballero en talla S, M, L, XL</h2>
                        <div class="product-footer">
                            <p class="product-price">$17</p>
                            <button class="add-to-cart" data-name="Buzos con capucha para caballero en talla S, M, L, XL" data-price="17" data-image="buzos2.png" onclick="event.preventDefault()"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"></path><path d="M12 5v14"></path></svg>Agregar</button>
                        </div>
                    </div>
                </a>
                <a href="#" class="product-card" data-category="Ropa de caballeros">
                    <div class="product-image"><img src="buzos3.png" alt="Buzos de caballeros"></div>
                    <div class="product-info">
                        <h2 class="product-name">Buzos de caballeros</h2>
                        <div class="product-footer">
                            <p class="product-price">$8</p>
                            <button class="add-to-cart" data-name="Buzos de caballeros" data-price="8" data-image="buzos3.png" onclick="event.preventDefault()"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"></path><path d="M12 5v14"></path></svg>Agregar</button>
                        </div>
                    </div>
                </a>
            </div>
            <div class="load-more-products">
                <button id="load-more-products"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"></path><path d="M12 5v14"></path></svg>Cargar más</button>
            </div>
        </div>
    </main>
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="security-badge">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
                    <p class="security-text">Compra 100% segura</p>
                </div>
                <div class="created-with">
                    <p class="created-text">Creado con</p>
                    <div class="creator-logo">
                        <div class="creator-logo-img"><img src="ganvent.png" alt="Ganvent"></div>
                        <p class="creator-name">Ganvent</p>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('index.html loaded');

            // Elementos del DOM
            const categoriesList = document.getElementById('categories-list');
            const scrollLeft = document.getElementById('scroll-left');
            const scrollRight = document.getElementById('scroll-right');
            const addToCartButtons = document.querySelectorAll('.add-to-cart');
            const cartCountElement = document.querySelector('.cart-count');
            const categoryItems = document.querySelectorAll('.category-item');
            const productCards = document.querySelectorAll('.product-card');
            const searchInput = document.getElementById('search-input');
            const mobileSearchInput = document.getElementById('mobile-search-input');
            const productsGrid = document.getElementById('products-grid');
            const loadMoreCategoriesButton = document.getElementById('load-more-categories');
            const loadMoreProductsButton = document.getElementById('load-more-products');

            // Lista de categorías adicionales
            const additionalCategories = ['Accesorios', 'Calzado'];

            // Lista de productos adicionales
            const additionalProducts = [
                {
                    name: 'Zapatillas deportivas hombre',
                    price: 25,
                    image: 'zapatillas_hombre.png',
                    category: 'Calzado'
                },
                {
                    name: 'Bolso de cuero dama',
                    price: 20,
                    image: 'bolso_dama.png',
                    category: 'Accesorios'
                },
                {
                    name: 'Gorra unisex',
                    price: 12,
                    image: 'gorra_unisex.png',
                    category: 'Accesorios'
                }
            ];

            // Imagen predeterminada para productos sin imagen
            const defaultImage = 'placeholder.png';

            // Mostrar notificaciones
            function showNotification(message, type) {
                const notification = document.createElement('div');
                notification.textContent = message;
                notification.className = `notification ${type}`;
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 3000);
            }

            // Obtener carrito de localStorage
            function getCart() {
                try {
                    const cart = JSON.parse(localStorage.getItem('cart') || '{}');
                    console.log('Cart loaded:', cart);
                    return cart;
                } catch (error) {
                    console.error('Error loading cart from localStorage:', error);
                    return {};
                }
            }

            // Guardar carrito en localStorage
            function saveCart(cart) {
                try {
                    localStorage.setItem('cart', JSON.stringify(cart));
                    console.log('Cart saved:', cart);
                } catch (error) {
                    console.error('Error saving cart to localStorage:', error);
                    showNotification('Error al guardar el carrito', 'error');
                }
            }

            // Actualizar contador del carrito
            function updateCartCount() {
                const cart = getCart();
                const count = Object.keys(cart).length;
                console.log('Updating cart count:', count);
                cartCountElement.textContent = count;
                document.querySelectorAll('.add-to-cart').forEach(button => {
                    const name = button.dataset.name;
                    if (cart[name]) {
                        button.classList.add('disabled');
                        button.disabled = true;
                    } else {
                        button.classList.remove('disabled');
                        button.disabled = false;
                    }
                });
            }

            // Filtrar productos por categoría y búsqueda
            function filterProducts(category, searchQuery = '') {
                console.log('Filtering products:', { category, searchQuery });
                const allProductCards = document.querySelectorAll('.product-card');
                allProductCards.forEach(card => {
                    const productCategory = card.dataset.category;
                    const productName = card.querySelector('.product-name').textContent.toLowerCase();
                    const matchesCategory = category === 'Ver todos' || productCategory === category;
                    const matchesSearch = productName.includes(searchQuery.toLowerCase());
                    card.style.display = matchesCategory && matchesSearch ? 'block' : 'none';
                });
            }

            // Manejar clics en categorías
            function setupCategoryListeners() {
                document.querySelectorAll('.category-item').forEach(item => {
                    item.addEventListener('click', (e) => {
                        e.preventDefault();
                        document.querySelectorAll('.category-item').forEach(i => {
                            i.classList.remove('category-active');
                            i.classList.add('category-inactive');
                        });
                        item.classList.add('category-active');
                        item.classList.remove('category-inactive');
                        const category = item.textContent;
                        localStorage.setItem('selectedCategory', category);
                        filterProducts(category, searchInput.value || mobileSearchInput.value);
                    });
                });
            }

            // Cargar más categorías
            loadMoreCategoriesButton.addEventListener('click', () => {
                additionalCategories.forEach(category => {
                    const newCategory = document.createElement('a');
                    newCategory.href = '#';
                    newCategory.className = 'category-item category-inactive';
                    newCategory.textContent = category;
                    categoriesList.insertBefore(newCategory, loadMoreCategoriesButton);
                    newCategory.addEventListener('click', (e) => {
                        e.preventDefault();
                        document.querySelectorAll('.category-item').forEach(i => {
                            i.classList.remove('category-active');
                            i.classList.add('category-inactive');
                        });
                        newCategory.classList.add('category-active');
                        newCategory.classList.remove('category-inactive');
                        localStorage.setItem('selectedCategory', category);
                        filterProducts(category, searchInput.value || mobileSearchInput.value);
                    });
                });
                loadMoreCategoriesButton.remove();
                showNotification('Categorías adicionales cargadas', 'success');
            });

            // Crear un nuevo producto en el DOM
            function createProductCard(product) {
                const card = document.createElement('a');
                card.href = '#';
                card.className = 'product-card';
                card.dataset.category = product.category;
                card.innerHTML = `
                    <div class="product-image">
                        <img src="${product.image || defaultImage}" alt="${product.name}">
                    </div>
                    <div class="product-info">
                        <h2 class="product-name">${product.name}</h2>
                        <div class="product-footer">
                            <p class="product-price">$${product.price}</p>
                            <button class="add-to-cart" data-name="${product.name}" data-price="${product.price}" data-image="${product.image || defaultImage}" onclick="event.preventDefault()">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M5 12h14"></path>
                                    <path d="M12 5v14"></path>
                                </svg>
                                Agregar
                            </button>
                        </div>
                    </div>
                `;
                card.querySelector('.add-to-cart').addEventListener('click', (e) => {
                    e.preventDefault();
                    const name = product.name;
                    const price = product.price;
                    const image = product.image || defaultImage;
                    const cart = getCart();
                    if (cart[name]) {
                        showNotification('Este producto ya está en el carrito', 'error');
                        return;
                    }
                    cart[name] = { price, size: '', color: '', quantity: 1, image };
                    saveCart(cart);
                    updateCartCount();
                    showNotification('Producto agregado al carrito', 'success');
                });
                return card;
            }

            // Cargar más productos
            loadMoreProductsButton.addEventListener('click', () => {
                additionalProducts.forEach(product => {
                    const newProductCard = createProductCard(product);
                    productsGrid.appendChild(newProductCard);
                });
                loadMoreProductsButton.remove();
                showNotification('Productos adicionales cargados', 'success');
                filterProducts(localStorage.getItem('selectedCategory') || 'Ver todos', searchInput.value || mobileSearchInput.value);
            });

            // Manejar búsqueda
            function setupSearchListeners(input) {
                input.addEventListener('input', () => {
                    const searchQuery = input.value;
                    const selectedCategory = localStorage.getItem('selectedCategory') || 'Ver todos';
                    filterProducts(selectedCategory, searchQuery);
                    // Sincronizar ambos campos de búsqueda
                    searchInput.value = searchQuery;
                    mobileSearchInput.value = searchQuery;
                });
            }

            setupSearchListeners(searchInput);
            setupSearchListeners(mobileSearchInput);

            // Navegación de categorías
            scrollLeft.addEventListener('click', () => {
                console.log('Scrolling categories left');
                categoriesList.scrollBy({ left: -200, behavior: 'smooth' });
            });

            scrollRight.addEventListener('click', () => {
                console.log('Scrolling categories right');
                categoriesList.scrollBy({ left: 200, behavior: 'smooth' });
            });

            // Manejar clics en "Agregar al carrito"
            addToCartButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault();
                    const name = button.dataset.name;
                    const price = button.dataset.price;
                    const image = button.dataset.image || defaultImage;
                    console.log('Add to cart clicked:', name, price, image);

                    const cart = getCart();
                    if (cart[name]) {
                        showNotification('Este producto ya está en el carrito', 'error');
                        return;
                    }

                    cart[name] = { price, size: '', color: '', quantity: 1, image };
                    saveCart(cart);
                    updateCartCount();
                    showNotification('Producto agregado al carrito', 'success');
                });
            });

            // Restaurar categoría seleccionada
            const savedCategory = localStorage.getItem('selectedCategory') || 'Ver todos';
            document.querySelectorAll('.category-item').forEach(item => {
                if (item.textContent === savedCategory) {
                    item.classList.add('category-active');
                    item.classList.remove('category-inactive');
                } else {
                    item.classList.add('category-inactive');
                    item.classList.remove('category-active');
                }
            });

            // Inicializar
            setupCategoryListeners();
            updateCartCount();
            filterProducts(savedCategory);
        });
    </script>
</body>
</html>